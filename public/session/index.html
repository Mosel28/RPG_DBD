<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/assets/style/main.css">
    <title>Session</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script type="text/javascript" src="/assets/script/auth.js"></script>
</head>


<!-- This Page is for the Entitus. -->

<body>

<div class="root" id="entity">
    <a id="test"></a>
    <button class="fixedBtn" v-if="!shown" @click="toggleQueue">Queue</button>
    <div v-if="shown" class="editbox">
        <div class="ct">
            <button v-if="!queueShown && !createGameShown || isEntity" class="fixedBtn" @click="toggleQueue">Close</button>
            <div class="advice" v-if="message.length > 0"><a>{{message}}</a></div>
            <div v-if="createGameShown">
                <button @click="createGame">Create Game</button>
                <a>Or join a game</a>
                <input type="text" v-model="gameKey">
                <button @click="join">Join</button>
            </div>
            <div v-if="queueShown">
                <div>
                    <button @click="sendPosition">Send</button>
                    <div v-for="player in players">
                        Name: <a v-if="isEntity" @click="toggleMenu(document.getElementById(player._id))">{{player.name}}</a><a v-else>{{player.name}}</a>
                        <button v-if="isEntity" @click="kickPlayer(player._id)">Kick</button>
                        <nav class="context-menu" :id="player._id">
                            <ul class="context-menu__items">
                                <li class="context-menu__item">
                                    <a class="context-menu__link"  @click="changePlayerType(player._id, 'killer')">
                                        Make Killer
                                    </a>
                                </li>
                                <li class="context-menu__item">
                                    <a class="context-menu__link"  @click="changePlayerType(player._id, 'survivor')">
                                        Make Survivor
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                    <div v-if="isEntity">
                        <div v-for="token in tokens">
                            <a>{{token}}</a>
                        </div>
                        <button @click="createToken">Create token</button>
                    </div>
                    <button @click="quit">Quit</button>
                </div>
            </div>
        </div>
    </div>
    <div v-if="isEntity">
        <div class="stateBoard">
            <!-- State of each survivor (normal, first hooked, second hooked, dead on hook)-->
            <h1>Killer State</h1>
            <div>
                <div v-for="player of killers">
                    <a>{{player.name}}</a>
                </div>
            </div>
        </div>
        <div class="stateBoard">
            <!-- State of each survivor (normal, first hooked, second hooked, dead on hook)-->
            <h1>Survivor State</h1>
            <div>
                <div v-for="player of survivors">
                    <a>{{player.name}}</a>
                </div>
            </div>
        </div>

        <div class="stateBoard">
            <!-- Progress of each generator + Gates -->
            <h1>Generator State</h1>
            <!--EXAMPLECODE; REPLACE WITH VUE-->
        </div>

        <div class="stateBoard">
            <!-- Which hook is in use? When must the Entitus Kill the pres?-->
            <h1>Hook State</h1>
            <!--Examplecode-->
        </div>

        <div class="stateBoard">
            <!-- reset game. Kick player. Whatever makes sense -->
        </div>
    </div>


</div>
<script src="mainvue.js"></script>
</body>

</html>